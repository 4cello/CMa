<!DOCTYPE html>
<html lang="en">
  <head>
  	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">
	
 	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script> 
 	
 	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-table/1.11.1/bootstrap-table.min.css" />
 	<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-table/1.11.1/bootstrap-table.min.js"></script>
 	
 	<style>

 	</style>
 	
  </head>

  <body>
    <h1>Test</h1>
    <div class=container>
    
    <div class="row">
	    <div class="col-md-3">
		    <div class="panel panel-info" style="width: 300px;">
		    	<div class="panel-heading" >
					<h3 class="panel-title">Registers</h3>
				</div>
				<div class="panel-body" >
					<table class="table table-bordered" >
						<thead>
							<th>PC</th>
							<th>FP</th>
							<th>SP</th>
							<th>EP</th>
							<th>HP</th>
						</thead>
						<tbody>
							<tr>
								<td id="PC"></td>
								<td id="FP"></td>
								<td id="SP"></td>
								<td id="EP"></td>
								<td id="HP"></td>
							</tr>
						</tbody>
					</table>
				</div>
		    </div>
	    </div>
	    <div class="col-md-2">
		</div>
	    <div class="col-md-7">
		    <div class="panel panel-primary" >
		    	<div class="panel-heading" >
					<h3 class="panel-title">Controls</h3>
				</div>
				<div class="panel-body" >
				</div>
		    </div>
	    </div>

    </div>
    
 	<div class="row">
	 	<div class="col-md-3">
	 	
			<div class="panel panel-info" style="width: 300px;">
				<div class="panel-heading" >
			    	<h3 class="panel-title">Program Store (C)</h3>
			    </div>
			    <div class="panel-body" style="margin-top: 0; margin-bottom: 0; padding-top: 0; padding-bottom:0;">
			    	<table class="table" style="border-bottom-style:hidden; margin-top: 0; margin-bottom: 0; padding-top: 0; padding-bottom:0;">
					  <thead style="border:0px; ">
					  		<th class="col-md-1 text-center"></th>
					  		<th class="col-md-2 text-right"></th>
					  		<th class="col-md-4 text-center">label</th>
						    <th class="col-md-1 text-center">addr</th>
						    <th class="col-md-5 ">instr</th>
					  </thead>
					</table>
			  	</div>
			  	<div class="panel-body" style="overflow: auto; height: 400px; padding:0px; ">
					<table class="table table-fixed header-fixed "  id="ProgramStore">
					
					</table>
				</div>
			</div>
		
		</div>
	
	 	<div class="col-md-2">
	 	</div>

	 	<div class="col-md-3">
			<div class="panel panel-success" style="width: 300px;">
				<div class="panel-heading">
			    	<h3 class="panel-title">Stack</h3>
			  	</div>
			  	<div class="panel-body" style="margin-top: 0; margin-bottom: 0; padding-top: 0; padding-bottom:0;">
			    	<table class="table" style="border-bottom-style:hidden; margin-top: 0; margin-bottom: 0; padding-top: 0; padding-bottom:0;">
					  <thead style="border:0px; ">
					  		<th class="col-md-1 text-right" data-field="ptr"></th>
					  		<th class="col-md-2 text-center" data-field="address">addr</th>
					  		<th class="col-md-4 text-center" data-field="variable">variable</th>
						    <th class="col-md-5 text-center" data-field="value">value</th>
					  </thead>
					</table>
			  	</div>
				<div class="panel-body" style="overflow: auto; height: 400px; padding:0px">
					<table class="table " id="Stack">
					  
					</table>
				</div>
			
			</div>
		</div>
	
	 	<div class="col-md-1">
	 	</div>

		<div class="col-md-3">
			<div class="panel panel-success" style="width: 250px;">
				<div class="panel-heading">
			    	<h3 class="panel-title">Heap</h3>
			  	</div>
			  	<div class="panel-body" style="margin-top: 0; margin-bottom: 0; padding-top: 0; padding-bottom:0;">
			    	<table class="table" style="border-bottom-style:hidden; margin-top: 0; margin-bottom: 0; padding-top: 0; padding-bottom:0;">
						<thead style="border:0px; ">
					  		<th class="col-md-2 text-center">addr</th>
						 	<th class="col-md-10 text-center">val</th>
				  		</thead>
				  	</table>
			  	</div>
				<div class="panel-body" style="overflow: auto; height: 400px;">
					<table class="table" id="Heap">
					</table>
				</div>
			
			</div>
		</div>

	</div>
	
	</div> <!--  outer container -->
    
	<script src="/js/globals.js"></script>
    <script src="/js/instructions.js"></script>
	<script src="/js/sample_program.js"></script>
	
	<script type="text/javascript">

	var pcData = [];
	for(var i=0; i<ex_prog.length; i++) {
		var instr = ex_prog[i];
		var row = { "ptr": "", "breakpoint": "", "label": instr.label, "address": i, "instruction": instr.toFormattedString() };
		pcData.push(row);
	}
	
	// now blank out rest of PC
	for(var i=ex_prog.length; i<PROGRAM_STORE_SIZE; i++) {
		var instr = ex_prog[i];
		var row = { "ptr": "", "breakpoint": "", "label": "", "address": i, "instruction": "-" };
		pcData.push(row);
	}
	
	$('#ProgramStore').append(
		    $.map(pcData, function (item, index) {
		    	return '<tr>' 
		    		+ '<td class="col-md-1 text-right"></td>' 
		    		+ '<td class="col-md-2 text-center"></td>' 
		    		+ '<td class="col-md-4 text-right table-bordered ">' + item.label + '</td>' 
		    		+ '<td class="col-md-1 text-center table-bordered ">' + index + '</td>'
		    		+ '<td class="col-md-5 text-left table-bordered ">' + item.instruction + '</td>'
		    		+ '</tr>';
		}).join());
	
	
	//$('#PS').scrollTo(0,1000);

 	var stackData = [];
	for(var i=MAX_STACKSIZE; i>0; i--) {
		var row = { "ptr": "", "address": i, "variable": "", "value": "0" };
		stackData.push(row);
	}
	$('#Stack').append(
		    $.map(stackData, function (item, index) {
		    	return '<tr>' 
		    		+ '<td class="col-md-1 text-right"></td>' 
		    		+ '<td class="col-md-2 text-right table-bordered">' + item.address + '</td>' 
		    		+ '<td class="col-md-4 text-center table-bordered ">' + item.variable + '</td>' 
		    		+ '<td class="col-md-5 text-center table-bordered ">' + item.value + '</td>'
		    		+ '</tr>';
		}).join());

	
 	var heapData = [];
	for(var i=MAIN_MEMORY_SIZE; i>MAX_STACKSIZE; i--) {
		var row = { "address": i, "value": "0" };
		heapData.push(row);
	}
	$('#Heap').append(
		    $.map(heapData, function (item, index) {
		    	return '<tr>' 
		    		+ '<td class="col-md-2 text-center table-bordered">' + item.address + '</td>' 
		    		+ '<td class="col-md-10 text-center table-bordered ">' + item.value + '</td>' 
		    		+ '</tr>';
		}).join());

	$('#PC').html(PC);
	$('#FP').html(FP);
	$('#SP').html(SP);
	$('#EP').html(EP);
	$('#HP').html(HP);


	</script>


  </body>
</html>


